<style>
	div{background:#000;color:#fff;height:100%}
</style>
<div>開始</div>
<script>
onclick=()=>{
	Notification.requestPermission()
	new Notification("テスト通知です。")
	navigator.mediaDevices.getUserMedia({audio:!0}).then(A=>{
		let $=new AudioContext()
		let B=$.createScriptProcessor(256)
		let Time=0
		B.onaudioprocess=function(B){
			document.querySelectorAll("div")[0].style.height=256*[0,...B.inputBuffer.getChannelData(0)].reduce((a,x)=>a+x**2)
			if([0,...B.inputBuffer.getChannelData(0)].reduce((a,x)=>a+x**2)>=1&&new Date().getTime()>Time+10e3){
				Time=new Date().getTime()
				new Notification("声を抑えましょう。")
				console.log([0,...B.inputBuffer.getChannelData(0)].reduce((a,x)=>a+x**2))
			}
		}
		B.connect($.destination)
		$.createMediaStreamSource(A).connect(B)
	})
}
</script>