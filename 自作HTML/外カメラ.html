<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta content="width=device-width" name="viewport">
		<style>
			html,body,video{
				height:100%;
			}
			body{
				background:#000;margin:unset;
			}
			video{
				display:block;width:100%;
			}
		</style>
		<title>外カメラ</title>
	</head>
	<body>
		<video id="video" playsinline>
		</video>
		<script>
			(async()=>{
				video.srcObject=await navigator.mediaDevices.getUserMedia({
					video:{
						facingMode:{
							exact:"environment"
						}
					}
				});
				video.play();
			})();
			video.onclick=()=>{
				let canvas=document.createElement("canvas");
				canvas.height=video.videoHeight;
				canvas.width=video.videoWidth;
				canvas.getContext("2d").drawImage(video,0,0);
				let date=new Date;
				Object.assign(document.createElement("a"),{
					download:date.getFullYear()+"年"+(date.getMonth()+1)+"月"+date.getDate()+"日 "+date.getHours()+"時"+date.getMinutes()+"分"+date.getSeconds()+"秒.png",href:canvas.toDataURL()
				}).click();
			}
		</script>
	</body>
</html>